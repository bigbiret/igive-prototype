---
export interface Props {
  cardId: number;
  method: 'email' | 'sms' | 'physical';
  value?: number;
}

const { cardId, method, value = 500 } = Astro.props;
---

<div class="recipient-form bg-white rounded-xl border border-gray-200 p-6" data-card-id={cardId}>
  {method === 'email' && (
    <div class="space-y-4">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        E-post detaljer for gavekort #{cardId}
      </h3>

      <div>
        <label for={`email-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Mottakers e-postadresse *
        </label>
        <input
          type="email"
          id={`email-${cardId}`}
          data-card-id={cardId}
          data-field="email"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none"
          placeholder="navn@eksempel.no"
          required
        />
      </div>

      <div>
        <label for={`name-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Mottakers navn
        </label>
        <input
          type="text"
          id={`name-${cardId}`}
          data-card-id={cardId}
          data-field="name"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none"
          placeholder="Ola Nordmann"
        />
      </div>

      <div>
        <label for={`message-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Personlig melding
        </label>
        <textarea
          id={`message-${cardId}`}
          data-card-id={cardId}
          data-field="message"
          rows="3"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none resize-none"
          placeholder="Skriv en hyggelig melding til mottaker..."
        ></textarea>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">NÃ¥r skal gavekortet sendes?</label>
        <div class="space-y-2">
          <button type="button" class="send-time-btn w-full px-4 py-3 text-left border border-gray-200 rounded-lg hover:border-[#D4A574] hover:bg-[#FDF9F5] transition-all" data-card-id={cardId} data-value="now">
            <span class="font-medium">Send nÃ¥</span>
            <span class="text-sm text-gray-500 ml-2">Umiddelbar levering</span>
          </button>
          <button type="button" class="send-time-btn w-full px-4 py-3 text-left border border-gray-200 rounded-lg hover:border-[#D4A574] hover:bg-[#FDF9F5] transition-all" data-card-id={cardId} data-value="scheduled">
            <span class="font-medium">Planlegg sending</span>
            <span class="text-sm text-gray-500 ml-2">Velg dato og tid</span>
          </button>
        </div>
        <div id={`schedule-${cardId}`} class="mt-3 p-3 bg-gray-50 rounded-lg hidden">
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-xs text-gray-600 mb-1">Dato</label>
              <input type="date" class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:border-[#D4A574] focus:outline-none" />
            </div>
            <div>
              <label class="block text-xs text-gray-600 mb-1">Tid</label>
              <input type="time" class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:border-[#D4A574] focus:outline-none" />
            </div>
          </div>
        </div>
      </div>
    </div>
  )}

  {method === 'sms' && (
    <div class="space-y-4">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        SMS detaljer for gavekort #{cardId}
      </h3>

      <div>
        <label for={`phone-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Mobilnummer *
        </label>
        <div class="flex gap-2">
          <select class="px-3 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:outline-none">
            <option value="+47">ðŸ‡³ðŸ‡´ +47</option>
            <option value="+46">ðŸ‡¸ðŸ‡ª +46</option>
            <option value="+45">ðŸ‡©ðŸ‡° +45</option>
          </select>
          <input
            type="tel"
            id={`phone-${cardId}`}
            data-card-id={cardId}
            data-field="phone"
            class="flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none"
            placeholder="999 99 999"
            required
          />
        </div>
      </div>

      <div>
        <label for={`sms-name-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Mottakers navn
        </label>
        <input
          type="text"
          id={`sms-name-${cardId}`}
          data-card-id={cardId}
          data-field="name"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none"
          placeholder="Ola Nordmann"
        />
      </div>

      <div>
        <label for={`sms-message-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Kort melding
        </label>
        <textarea
          id={`sms-message-${cardId}`}
          data-card-id={cardId}
          data-field="message"
          rows="2"
          maxlength="160"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none resize-none"
          placeholder="Maks 160 tegn..."
        ></textarea>
        <p class="text-xs text-gray-500 mt-1">0/160 tegn</p>
      </div>
    </div>
  )}

  {method === 'physical' && (
    <div class="space-y-4">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
        <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
        </svg>
        Fysisk gavekort #{cardId}
      </h3>

      <div class="bg-[#FDF9F5] rounded-lg p-4">
        <p class="text-sm text-gray-700 mb-3">
          Dette gavekortet vil bli generert som PDF for utskrift.
        </p>
        <div class="flex items-center gap-3">
          <div class="flex items-center gap-2">
            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span class="text-sm">Klar for utskrift</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span class="text-sm">HÃ¸y kvalitet</span>
          </div>
        </div>
      </div>

      <div>
        <label for={`physical-name-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Mottakers navn (valgfritt)
        </label>
        <input
          type="text"
          id={`physical-name-${cardId}`}
          data-card-id={cardId}
          data-field="name"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none"
          placeholder="Vises pÃ¥ gavekortet"
        />
      </div>

      <div>
        <label for={`physical-message-${cardId}`} class="block text-sm font-medium text-gray-700 mb-2">
          Gratulasjon (valgfritt)
        </label>
        <textarea
          id={`physical-message-${cardId}`}
          data-card-id={cardId}
          data-field="message"
          rows="2"
          class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 focus:outline-none resize-none"
          placeholder="F.eks. 'Gratulerer med dagen!'"
        ></textarea>
      </div>
    </div>
  )}
</div>

<style>
  .send-time-btn.selected {
    @apply border-[#D4A574] bg-[#FDF9F5];
  }
</style>