---
// Realistisk ovenfra-perspektiv animasjon av butikkbetaling
---

<div class="payment-animation-topview">
  <div class="checkout-scene">
    <!-- Butikkterminal sett ovenfra -->
    <div class="pos-terminal">
      <!-- Terminal skjerm -->
      <div class="terminal-display">
        <div class="merchant-logo">iGive</div>
        <div class="display-amount">Kr 299,00</div>
        <div class="display-status" id="terminal-status">Venter på kort...</div>
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
      </div>
      <!-- NFC-område på terminalen -->
      <div class="nfc-pad">
        <div class="nfc-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/>
          </svg>
        </div>
        <div class="nfc-pulse"></div>
        <div class="nfc-pulse"></div>
      </div>
    </div>
    
    <!-- iPhone sett ovenfra med Wallet -->
    <div class="iphone-top">
      <!-- Telefon kropp -->
      <div class="phone-body">
        <!-- Wallet UI -->
        <div class="wallet-screen">
          <div class="wallet-header">
            <span class="wallet-time">14:23</span>
            <span class="wallet-title">Wallet</span>
          </div>
          <div class="wallet-card">
            <div class="card-header">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 32'%3E%3Crect width='48' height='32' rx='4' fill='%231A5490'/%3E%3Ctext x='24' y='20' text-anchor='middle' fill='white' font-family='Arial' font-size='10' font-weight='bold'%3EVISA%3C/text%3E%3C/svg%3E" alt="VISA" class="visa-logo">
              <span class="card-label">iGive Gavekort</span>
            </div>
            <div class="card-balance">Kr 1.250</div>
            <div class="card-number">•••• 4242</div>
            <div class="tap-instruction">Hold nær leser</div>
          </div>
          <div class="face-id-indicator">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3.5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.5c-2.49 0-4.71-1.16-6.16-2.98.03-.83 4.12-1.52 6.16-1.52s6.13.69 6.16 1.52C16.71 18.84 14.49 20 12 20z"/>
            </svg>
          </div>
        </div>
      </div>
      <!-- NFC-signal fra telefon -->
      <div class="phone-nfc-waves">
        <span class="phone-wave"></span>
        <span class="phone-wave"></span>
      </div>
    </div>
    
    <!-- Suksess-indikator -->
    <div class="payment-success">
      <div class="success-circle">
        <svg viewBox="0 0 52 52" class="success-check">
          <circle cx="26" cy="26" r="25" fill="none"/>
          <path fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>
      </div>
      <div class="success-text">Betalt!</div>
    </div>
  </div>
</div>

<style>
  .payment-animation-topview {
    @apply w-full h-full flex items-center justify-center;
    min-height: 400px;
    perspective: 800px;
  }
  
  .checkout-scene {
    @apply relative;
    transform-style: preserve-3d;
    transform: rotateX(15deg);
  }
  
  /* POS Terminal */
  .pos-terminal {
    @apply relative bg-gray-900 rounded-lg shadow-2xl;
    width: 220px;
    height: 280px;
    padding: 15px;
  }
  
  .terminal-display {
    @apply bg-gray-100 rounded-md p-4 mb-3;
    height: 140px;
    font-family: 'SF Mono', 'Monaco', monospace;
  }
  
  .merchant-logo {
    @apply text-xs text-gray-600 mb-2;
    font-weight: 600;
  }
  
  .display-amount {
    @apply text-2xl font-bold text-gray-900 mb-2;
  }
  
  .display-status {
    @apply text-sm text-gray-600;
    animation: status-update 5s ease-in-out infinite;
  }
  
  @keyframes status-update {
    0%, 15% { content: 'Venter på kort...'; }
    20%, 35% { content: 'Leser kort...'; }
    40%, 55% { content: 'Behandler...'; }
    60%, 75% { content: 'Godkjenner...'; }
    80%, 100% { content: 'Godkjent ✓'; color: #22c55e; }
  }
  
  .progress-bar {
    @apply mt-3 h-1 bg-gray-300 rounded-full overflow-hidden;
  }
  
  .progress-fill {
    @apply h-full bg-green-500;
    width: 0%;
    animation: progress-load 5s ease-in-out infinite;
  }
  
  @keyframes progress-load {
    0%, 15% { width: 0%; }
    20%, 35% { width: 30%; }
    40%, 55% { width: 60%; }
    60%, 75% { width: 90%; }
    80%, 100% { width: 100%; }
  }
  
  /* NFC Pad on Terminal */
  .nfc-pad {
    @apply relative bg-gray-800 rounded-lg;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .nfc-icon {
    @apply text-gray-500 z-10;
    width: 40px;
    height: 40px;
  }
  
  .nfc-pulse {
    @apply absolute border-2 border-indigo-400 rounded-lg;
    width: 100%;
    height: 100%;
    opacity: 0;
    animation: nfc-pulse-terminal 2s ease-out infinite;
  }
  
  .nfc-pulse:nth-child(3) {
    animation-delay: 0.5s;
  }
  
  @keyframes nfc-pulse-terminal {
    0% {
      opacity: 0;
      transform: scale(0.95);
    }
    50% {
      opacity: 0.3;
    }
    100% {
      opacity: 0;
      transform: scale(1.05);
    }
  }
  
  /* iPhone ovenfra */
  .iphone-top {
    @apply absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 20;
    animation: phone-hover 5s ease-in-out infinite;
  }
  
  @keyframes phone-hover {
    /* Start position - over terminalen */
    0%, 10% { 
      transform: translateX(-50%) translateY(-80px) scale(1);
      opacity: 0.95;
    }
    /* Beveger seg ned mot terminal */
    15%, 20% {
      transform: translateX(-50%) translateY(-30px) scale(1.02);
      opacity: 1;
    }
    /* Tapper på terminal */
    25%, 75% {
      transform: translateX(-50%) translateY(0px) scale(1.05);
      opacity: 1;
    }
    /* Løftes opp igjen */
    80%, 85% {
      transform: translateX(-50%) translateY(-30px) scale(1.02);
      opacity: 1;
    }
    /* Tilbake til start */
    90%, 100% {
      transform: translateX(-50%) translateY(-80px) scale(1);
      opacity: 0.95;
    }
  }
  
  .phone-body {
    @apply bg-black rounded-3xl shadow-2xl;
    width: 170px;
    height: 340px;
    padding: 8px;
    border: 2px solid #333;
  }
  
  /* Wallet UI */
  .wallet-screen {
    @apply bg-white rounded-2xl h-full p-4 relative overflow-hidden;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .wallet-header {
    @apply flex justify-between items-center mb-4 text-white;
  }
  
  .wallet-time {
    @apply text-xs font-medium;
  }
  
  .wallet-title {
    @apply text-sm font-semibold;
  }
  
  .wallet-card {
    @apply bg-white rounded-xl p-4 shadow-lg;
    animation: card-glow 5s ease-in-out infinite;
  }
  
  @keyframes card-glow {
    0%, 20%, 80%, 100% { 
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    25%, 75% { 
      box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.3);
      transform: scale(1.02);
    }
  }
  
  .card-header {
    @apply flex items-center gap-2 mb-3;
  }
  
  .visa-logo {
    @apply h-6 rounded;
  }
  
  .card-label {
    @apply text-xs text-gray-600;
  }
  
  .card-balance {
    @apply text-2xl font-bold text-gray-900 mb-1;
  }
  
  .card-number {
    @apply text-sm text-gray-500 mb-3;
  }
  
  .tap-instruction {
    @apply text-xs text-center text-white bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg py-2 px-3;
    animation: tap-pulse 5s ease-in-out infinite;
  }
  
  @keyframes tap-pulse {
    0%, 20%, 80%, 100% { 
      opacity: 0.5;
      transform: scale(1);
    }
    25%, 75% { 
      opacity: 1;
      transform: scale(1.05);
    }
  }
  
  .face-id-indicator {
    @apply absolute bottom-4 right-4 text-white opacity-60;
    width: 24px;
    height: 24px;
    animation: face-id-scan 5s ease-in-out infinite;
  }
  
  @keyframes face-id-scan {
    0%, 100% { opacity: 0.3; }
    25%, 30% { opacity: 1; }
  }
  
  /* NFC waves fra telefon */
  .phone-nfc-waves {
    @apply absolute -bottom-4 left-1/2 -translate-x-1/2;
    opacity: 0;
    animation: phone-waves-appear 5s ease-in-out infinite;
  }
  
  @keyframes phone-waves-appear {
    0%, 24%, 76%, 100% { opacity: 0; }
    25%, 75% { opacity: 1; }
  }
  
  .phone-wave {
    @apply absolute block border-2 border-indigo-400 rounded-full;
    left: 50%;
    transform: translateX(-50%);
    animation: phone-wave-expand 1.5s ease-out infinite;
  }
  
  .phone-wave:nth-child(1) {
    width: 60px;
    height: 20px;
    animation-delay: 0s;
  }
  
  .phone-wave:nth-child(2) {
    width: 80px;
    height: 25px;
    animation-delay: 0.5s;
  }
  
  @keyframes phone-wave-expand {
    0% {
      opacity: 0.6;
      transform: translateX(-50%) scaleX(0.8) scaleY(0.6);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) scaleX(1.5) scaleY(1.2);
    }
  }
  
  /* Success indicator */
  .payment-success {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center;
    z-index: 30;
    opacity: 0;
    animation: success-show 5s ease-in-out infinite;
  }
  
  @keyframes success-show {
    0%, 75% { 
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.5);
    }
    80%, 95% { 
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    100% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
    }
  }
  
  .success-circle {
    @apply w-20 h-20 mx-auto mb-2;
  }
  
  .success-check {
    @apply w-full h-full;
    filter: drop-shadow(0 4px 12px rgba(34, 197, 94, 0.4));
  }
  
  .success-check circle {
    stroke: #22c55e;
    stroke-width: 2;
    fill: white;
    stroke-dasharray: 166;
    stroke-dashoffset: 166;
    animation: check-circle 5s ease-in-out infinite;
  }
  
  @keyframes check-circle {
    0%, 75% { stroke-dashoffset: 166; }
    85%, 100% { stroke-dashoffset: 0; }
  }
  
  .success-check path {
    stroke: #22c55e;
    stroke-width: 3;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 48;
    stroke-dashoffset: 48;
    animation: check-mark 5s ease-in-out infinite;
  }
  
  @keyframes check-mark {
    0%, 80% { stroke-dashoffset: 48; }
    90%, 100% { stroke-dashoffset: 0; }
  }
  
  .success-text {
    @apply text-lg font-bold text-green-600;
  }
  
  /* Responsive */
  @media (max-width: 640px) {
    .checkout-scene {
      transform: rotateX(10deg) scale(0.85);
    }
    
    .pos-terminal {
      width: 180px;
      height: 240px;
    }
    
    .phone-body {
      width: 140px;
      height: 280px;
    }
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .iphone-top,
    .progress-fill,
    .nfc-pulse,
    .phone-wave,
    .wallet-card,
    .tap-instruction,
    .face-id-indicator,
    .phone-nfc-waves,
    .payment-success,
    .success-check circle,
    .success-check path {
      animation: none;
    }
  }
</style>