---
// Clean, minimalist QR scanning animation
// Semi-photorealistic CGI style with seamless 6-second loop
---

<div class="qr-scan-container">
  <div class="scene-wrapper">
    <!-- Phone with QR (on left) -->
    <div class="phone">
      <div class="phone-body">
        <div class="phone-screen">
          <div class="screen-content">
            <!-- QR Code Section -->
            <div class="qr-section">
              <div class="qr-code">
                <!-- More realistic QR code pattern -->
                <svg viewBox="0 0 200 200" class="qr-svg">
                  <!-- Corner squares (positioning markers) -->
                  <rect x="10" y="10" width="60" height="60" fill="#000"/>
                  <rect x="20" y="20" width="40" height="40" fill="#fff"/>
                  <rect x="30" y="30" width="20" height="20" fill="#000"/>
                  
                  <rect x="130" y="10" width="60" height="60" fill="#000"/>
                  <rect x="140" y="20" width="40" height="40" fill="#fff"/>
                  <rect x="150" y="30" width="20" height="20" fill="#000"/>
                  
                  <rect x="10" y="130" width="60" height="60" fill="#000"/>
                  <rect x="20" y="140" width="40" height="40" fill="#fff"/>
                  <rect x="30" y="150" width="20" height="20" fill="#000"/>
                  
                  <!-- Data matrix pattern -->
                  <rect x="85" y="15" width="8" height="8" fill="#000"/>
                  <rect x="95" y="15" width="8" height="16" fill="#000"/>
                  <rect x="105" y="15" width="8" height="8" fill="#000"/>
                  <rect x="85" y="25" width="8" height="8" fill="#000"/>
                  <rect x="105" y="25" width="8" height="8" fill="#000"/>
                  <rect x="85" y="35" width="8" height="8" fill="#000"/>
                  <rect x="95" y="35" width="8" height="8" fill="#000"/>
                  <rect x="105" y="35" width="8" height="8" fill="#000"/>
                  
                  <rect x="15" y="85" width="8" height="8" fill="#000"/>
                  <rect x="25" y="85" width="16" height="8" fill="#000"/>
                  <rect x="45" y="85" width="8" height="8" fill="#000"/>
                  <rect x="55" y="85" width="8" height="16" fill="#000"/>
                  <rect x="15" y="95" width="8" height="8" fill="#000"/>
                  <rect x="35" y="95" width="8" height="8" fill="#000"/>
                  <rect x="45" y="95" width="8" height="8" fill="#000"/>
                  
                  <rect x="85" y="85" width="30" height="30" fill="#000"/>
                  <rect x="90" y="90" width="20" height="20" fill="#fff"/>
                  <rect x="95" y="95" width="10" height="10" fill="#000"/>
                  
                  <rect x="125" y="85" width="8" height="8" fill="#000"/>
                  <rect x="135" y="85" width="8" height="16" fill="#000"/>
                  <rect x="145" y="85" width="8" height="8" fill="#000"/>
                  <rect x="155" y="85" width="16" height="8" fill="#000"/>
                  <rect x="175" y="85" width="8" height="8" fill="#000"/>
                  <rect x="125" y="95" width="8" height="8" fill="#000"/>
                  <rect x="145" y="95" width="8" height="8" fill="#000"/>
                  <rect x="165" y="95" width="8" height="8" fill="#000"/>
                  <rect x="175" y="95" width="8" height="8" fill="#000"/>
                  
                  <rect x="85" y="125" width="8" height="8" fill="#000"/>
                  <rect x="95" y="125" width="8" height="16" fill="#000"/>
                  <rect x="105" y="125" width="8" height="8" fill="#000"/>
                  <rect x="85" y="135" width="8" height="8" fill="#000"/>
                  <rect x="105" y="135" width="8" height="8" fill="#000"/>
                  <rect x="85" y="145" width="8" height="8" fill="#000"/>
                  <rect x="95" y="145" width="8" height="8" fill="#000"/>
                  <rect x="105" y="145" width="8" height="8" fill="#000"/>
                  
                  <rect x="85" y="165" width="8" height="16" fill="#000"/>
                  <rect x="95" y="165" width="8" height="8" fill="#000"/>
                  <rect x="105" y="165" width="8" height="16" fill="#000"/>
                  <rect x="95" y="175" width="8" height="8" fill="#000"/>
                  
                  <rect x="125" y="125" width="16" height="8" fill="#000"/>
                  <rect x="145" y="125" width="8" height="8" fill="#000"/>
                  <rect x="155" y="125" width="8" height="16" fill="#000"/>
                  <rect x="165" y="125" width="8" height="8" fill="#000"/>
                  <rect x="175" y="125" width="8" height="8" fill="#000"/>
                  <rect x="125" y="145" width="8" height="8" fill="#000"/>
                  <rect x="135" y="145" width="8" height="8" fill="#000"/>
                  <rect x="145" y="145" width="8" height="8" fill="#000"/>
                  <rect x="165" y="145" width="8" height="8" fill="#000"/>
                  <rect x="175" y="145" width="8" height="8" fill="#000"/>
                  
                  <rect x="125" y="165" width="8" height="8" fill="#000"/>
                  <rect x="135" y="165" width="16" height="8" fill="#000"/>
                  <rect x="155" y="165" width="8" height="8" fill="#000"/>
                  <rect x="165" y="165" width="16" height="8" fill="#000"/>
                  <rect x="125" y="175" width="8" height="8" fill="#000"/>
                  <rect x="145" y="175" width="8" height="8" fill="#000"/>
                  <rect x="155" y="175" width="8" height="8" fill="#000"/>
                  <rect x="175" y="175" width="8" height="8" fill="#000"/>
                </svg>
              </div>
              <div class="qr-label">GAVEKORT</div>
              <div class="qr-amount">Kr 500,-</div>
            </div>
            <!-- Success overlay -->
            <div class="success-overlay">
              <div class="success-check">
                <svg viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="11" fill="#22c55e"/>
                  <path d="M7 12l3 3 7-7" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="success-text">Betalt!</div>
            </div>
            <!-- Scan line that moves across phone screen -->
            <div class="scan-line-vertical"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Barcode Scanner (on right) -->
    <div class="scanner">
      <div class="scanner-body">
        <!-- Scanner seen from side -->
        <div class="scanner-head"></div>
        <div class="scanner-grip"></div>
        <div class="trigger"></div>
        <!-- Red scan light -->
        <div class="scanner-light"></div>
      </div>
      <!-- Red laser beam -->
      <div class="laser-beam"></div>
    </div>
  </div>
</div>

<style>
  /* Container */
  .qr-scan-container {
    @apply relative w-full h-full flex items-center justify-center;
    min-height: 400px;
    background: radial-gradient(ellipse at center, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
    perspective: 1000px;
  }
  
  .scene-wrapper {
    @apply relative flex items-center gap-8;
    transform-style: preserve-3d;
    transform: rotateX(15deg) rotateY(-10deg);
  }
  
  /* Phone - positioned on left, tilted towards scanner */
  .phone {
    @apply relative;
    width: 120px;
    height: 200px;
    transform: translateZ(20px) rotateY(20deg);
    z-index: 5;
  }
  
  .phone-body {
    @apply relative w-full h-full;
    background: linear-gradient(145deg, #0a0a0a 0%, #000000 100%);
    border-radius: 20px;
    border: 2px solid #333;
    box-shadow: 
      0 10px 25px rgba(0, 0, 0, 0.4),
      0 5px 10px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
    padding: 8px;
  }
  
  .phone-screen {
    @apply relative w-full h-full;
    background: #ffffff;
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid #e5e7eb;
  }
  
  .screen-content {
    @apply w-full h-full flex flex-col items-center justify-center;
    position: relative;
    padding: 16px;
  }
  
  /* Vertical scan line on phone - scans only the QR code area */
  .scan-line-vertical {
    @apply absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 85px;
    top: 0;
    height: 2px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(239, 68, 68, 0.6) 10%, 
      rgba(239, 68, 68, 1) 50%, 
      rgba(239, 68, 68, 0.6) 90%, 
      transparent 100%);
    opacity: 0;
    animation: vertical-scan 6s ease-in-out infinite;
    filter: blur(0.5px);
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.8);
    z-index: 10;
  }
  
  @keyframes vertical-scan {
    0%, 35%, 70%, 100% { 
      opacity: 0;
      top: calc(50% - 60px);
    }
    38% {
      opacity: 1;
      top: calc(50% - 60px);
    }
    58% {
      opacity: 1;
      top: calc(50% + 25px);
    }
    65% {
      opacity: 0;
      top: calc(50% + 25px);
    }
  }
  
  /* Barcode Scanner - positioned on right, pointing left */
  .scanner {
    @apply relative;
    width: 180px;
    height: 170px;
    transform: translateZ(0);
    animation: scanner-movement 6s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    z-index: 10;
  }
  
  @keyframes scanner-movement {
    /* Start far right */
    0%, 5% {
      transform: translateX(100px) translateY(0) translateZ(-20px) rotateY(-30deg) rotateZ(5deg);
      filter: blur(0.2px);
    }
    
    /* Smooth approach for scanning */
    35% {
      transform: translateX(10px) translateY(0) translateZ(30px) rotateY(-5deg) rotateZ(0deg);
      filter: blur(0);
    }
    
    /* Hold steady during scan */
    38%, 60% {
      transform: translateX(10px) translateY(0) translateZ(30px) rotateY(-5deg) rotateZ(0deg);
      filter: blur(0);
    }
    
    /* Pull back after scan */
    85%, 100% {
      transform: translateX(100px) translateY(0) translateZ(-20px) rotateY(-30deg) rotateZ(5deg);
      filter: blur(0.2px);
    }
  }
  
  .scanner-body {
    @apply relative w-full h-full;
  }
  
  /* Scanner head - side view, pointing left */
  .scanner-head {
    @apply absolute;
    top: 20px;
    left: 0;
    width: 95px;
    height: 65px;
    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
    border-radius: 15px 50% 50% 15px;
    box-shadow: 
      0 3px 10px rgba(0, 0, 0, 0.5),
      inset 0 2px 2px rgba(255, 255, 255, 0.1);
    position: relative;
  }
  
  /* Scanner lens area - visible from side */
  .scanner-head::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 30px;
    height: 25px;
    background: #000;
    border-radius: 40%;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.8);
  }
  
  /* Scanner grip - narrower with thicker base */
  .scanner-grip {
    @apply absolute;
    top: 70px;
    left: 35px;
    width: 45px;
    height: 100px;
    background: linear-gradient(to bottom,
      #1a202c 0%,
      #1a202c 70%,
      #0f1114 100%);
    transform: rotate(15deg);
    transform-origin: top center;
    border-radius: 6px 6px 12px 12px;
    clip-path: polygon(
      15% 0%,
      85% 0%,
      90% 70%,
      100% 100%,
      0% 100%,
      10% 70%
    );
    box-shadow: 
      0 3px 10px rgba(0, 0, 0, 0.4),
      inset 0 2px 3px rgba(0, 0, 0, 0.3);
  }
  
  /* Grip base - thicker bottom part */
  .scanner-grip::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: -5px;
    right: -5px;
    height: 25px;
    background: linear-gradient(135deg, #0f1114 0%, #000 100%);
    border-radius: 0 0 15px 15px;
    box-shadow: 
      0 3px 8px rgba(0, 0, 0, 0.5),
      inset 0 -1px 2px rgba(255, 255, 255, 0.05);
  }
  
  /* Trigger button */
  .trigger {
    @apply absolute;
    top: 78px;
    left: 45px;
    width: 22px;
    height: 28px;
    background: linear-gradient(145deg, #fbbf24 0%, #d97706 100%);
    border-radius: 50% 10px 10px 50%;
    transform: rotate(15deg);
    box-shadow: 
      inset 0 -1px 2px rgba(0, 0, 0, 0.3),
      0 1px 3px rgba(0, 0, 0, 0.3);
    z-index: 1;
  }
  
  /* Red scanner light from front */
  .scanner-light {
    @apply absolute;
    top: 45px;
    left: 8px;
    width: 18px;
    height: 18px;
    background: radial-gradient(circle at center, 
      rgba(239, 68, 68, 0.9) 0%, 
      rgba(239, 68, 68, 0.5) 40%, 
      transparent 70%);
    border-radius: 50%;
    opacity: 0;
    animation: light-pulse 6s ease-in-out infinite;
    filter: blur(1px);
  }
  
  @keyframes light-pulse {
    0%, 35%, 62%, 100% { opacity: 0; }
    38%, 60% { opacity: 1; }
  }
  
  /* Red laser beam from scanner to phone */
  .laser-beam {
    @apply absolute;
    top: 52px;
    left: -65px;
    width: 75px;
    height: 1px;
    background: linear-gradient(90deg, 
      rgba(239, 68, 68, 1) 0%,
      rgba(239, 68, 68, 0.7) 30%,
      rgba(239, 68, 68, 0.3) 70%,
      transparent 100%);
    opacity: 0;
    animation: laser-shoot 6s ease-in-out infinite;
    filter: blur(0.5px);
    box-shadow: 
      0 0 8px rgba(239, 68, 68, 0.8),
      0 0 15px rgba(239, 68, 68, 0.4);
    transform-origin: right center;
  }
  
  @keyframes laser-shoot {
    0%, 35%, 62%, 100% { 
      opacity: 0;
      transform: scaleX(0);
    }
    38%, 60% { 
      opacity: 1;
      transform: scaleX(1);
    }
  }
  
  /* QR Code Section */
  .qr-section {
    @apply flex flex-col items-center;
    animation: qr-visibility 6s ease-in-out infinite;
  }
  
  @keyframes qr-visibility {
    0%, 65%, 100% { 
      opacity: 1;
      transform: scale(1);
    }
    70%, 80% { 
      opacity: 0;
      transform: scale(0.95);
    }
  }
  
  .qr-code {
    width: 85px;
    height: 85px;
    background: #fff;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    position: relative;
    padding: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .qr-svg {
    width: 100%;
    height: 100%;
    background: white;
  }
  
  .qr-svg rect {
    shape-rendering: crispEdges;
  }
  
  .qr-label {
    font-size: 10px;
    font-weight: 600;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 2px;
  }
  
  .qr-amount {
    font-size: 14px;
    font-weight: 700;
    color: #111827;
  }
  
  /* Success overlay */
  .success-overlay {
    @apply absolute inset-0 flex flex-col items-center justify-center;
    background: rgba(255, 255, 255, 0.95);
    opacity: 0;
    animation: success-fade 6s ease-in-out infinite;
  }
  
  @keyframes success-fade {
    0%, 65%, 85%, 100% { 
      opacity: 0;
      backdrop-filter: blur(0);
    }
    70%, 82% { 
      opacity: 1;
      backdrop-filter: blur(4px);
    }
  }
  
  .success-check {
    width: 60px;
    height: 60px;
    margin-bottom: 8px;
    animation: check-scale 6s ease-in-out infinite;
  }
  
  @keyframes check-scale {
    0%, 68%, 85%, 100% { 
      transform: scale(0);
    }
    72%, 82% { 
      transform: scale(1);
    }
  }
  
  .success-check svg {
    @apply w-full h-full;
    filter: drop-shadow(0 4px 12px rgba(34, 197, 94, 0.3));
  }
  
  .success-check svg path {
    stroke-dasharray: 20;
    stroke-dashoffset: 20;
    animation: check-draw 6s ease-in-out infinite;
  }
  
  @keyframes check-draw {
    0%, 70% { 
      stroke-dashoffset: 20;
    }
    78%, 100% { 
      stroke-dashoffset: 0;
    }
  }
  
  .success-text {
    font-size: 16px;
    font-weight: 700;
    color: #22c55e;
    animation: text-fade 6s ease-in-out infinite;
  }
  
  @keyframes text-fade {
    0%, 72%, 85%, 100% { 
      opacity: 0;
    }
    75%, 82% { 
      opacity: 1;
    }
  }
  
  /* Lighting effects */
  .phone-body::before {
    content: '';
    @apply absolute top-0 left-0 right-0;
    height: 40%;
    background: linear-gradient(180deg, 
      rgba(255, 255, 255, 0.05) 0%, 
      transparent 100%);
    border-radius: 20px 20px 0 0;
    pointer-events: none;
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .scanner,
    .scan-line-vertical,
    .qr-section,
    .success-overlay,
    .success-check,
    .laser-beam,
    .scanner-light {
      animation: none;
    }
    
    .scanner {
      transform: translateX(10px) translateY(0) translateZ(30px) rotateY(-5deg);
    }
    
    .qr-section {
      opacity: 1;
    }
    
    .success-overlay {
      display: none;
    }
  }
  
  /* Mobile optimizations */
  @media (max-width: 640px) {
    .scene-wrapper {
      transform: rotateX(10deg) rotateY(-5deg) scale(0.85);
      gap: 1.5rem;
    }
    
    .phone {
      width: 100px;
      height: 160px;
      transform: translateZ(15px) rotateY(20deg);
    }
    
    .scanner {
      width: 150px;
      height: 140px;
    }
    
    .scanner-head {
      width: 80px;
      height: 55px;
      top: 18px;
    }
    
    .scanner-grip {
      width: 38px;
      height: 85px;
      top: 60px;
      left: 30px;
    }
    
    .trigger {
      width: 18px;
      height: 24px;
      top: 66px;
      left: 38px;
    }
    
    .scanner-light {
      top: 38px;
      left: 6px;
      width: 15px;
      height: 15px;
    }
    
    .qr-code {
      width: 65px;
      height: 65px;
      padding: 8px;
    }
    
    .success-check {
      width: 50px;
      height: 50px;
    }
    
    .laser-beam {
      width: 65px;
      top: 45px;
      left: -55px;
    }
    
    .scan-line-vertical {
      width: 65px;
    }
  }
</style>